CREATE DATABASE IF NOT EXISTS health_db;
USE health_db;

-- Drop existing tables if they exist
DROP TABLE IF EXISTS health_calculations;
DROP TABLE IF EXISTS patients;

-- Create Tables with proper constraints
CREATE TABLE patients (
    id BIGINT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    address VARCHAR(200) NOT NULL
);

CREATE TABLE health_calculations (
    id BIGINT,
    patient_id BIGINT,
    duration INT NOT NULL,
    current_pulse INT NOT NULL,
    max_pulse INT NOT NULL,
    calories_burnt DOUBLE NOT NULL,
    PRIMARY KEY (id, patient_id),
    FOREIGN KEY (patient_id) REFERENCES patients(id) ON DELETE CASCADE,
    CHECK (current_pulse >=0),
    CHECK (duration > 0),
    CHECK (calories_burnt >= 0)
);


 INSERT INTO patients (id, name, address) VALUES
(357219, 'John Doe', '123 Main St Anytown USA'),
(684930, 'Jane Smith', '456 Elm St Somewhere USA'),
(129475, 'Bob Johnson', '789 Oak Ave Nowhere USA'), 
(831652, 'Alice Brown', '321 Pine Rd Smallville USA'),
(496078, 'Charlie Davis', '654 Maple Dr Bigcity USA'),
(205843, 'Eva Wilson', '987 Cedar Ln Metropolis USA'),
(763901, 'Frank Miller', '147 Birch St Hometown USA'),
(942516, 'Grace Taylor', '258 Spruce Ave Villagetown USA'),
(318724, 'Henry Clark', '369 Ash Rd Suburbia USA'),
(570392, 'Irene Adams', '741 Walnut Blvd Ruralville USA'),
(689145, 'Jack White', '852 Cherry St Cityville USA'),
(423867, 'Karen Green', '963 Pineapple Ln Beachtown USA'),
(157290, 'Liam Baker', '159 Orange Ave Mountainview USA'),
(895631, 'Mia Turner', '357 Lemon Rd Valleyville USA'),
(240786, 'Noah Carter', '486 Grape St Lakeside USA'),
(713459, 'Olivia King', '729 Peach Dr Hilltop USA'),
(586902, 'Peter Wright', '135 Banana Ave Riverside USA'),
(941307, 'Quinn Lee', '246 Mango Ln Clifftop USA'),
(378561, 'Rachel Hall', '864 Kiwi Rd Oceanside USA'),
(625894, 'Samuel Young', '975 Papaya St Desertville USA');


INSERT INTO health_calculations (id, patient_id, duration, current_pulse, max_pulse, calories_burnt) VALUES
(1, 831652, 60, 100, 120, 300.0),
(1, 496078, 45, 90, 112, 300.0),
(1, 205843, 60, 103, 123, 323.0),
(1, 763901, 45, 97, 125, 243.0),
(1, 942516, 60, 108, 131, 364.2),
(1, 318724, 45, 100, 119, 282.0),
(1, 570392, 60, 130, 101, 300.0),
(1, 689145, 45, 105, 132, 246.0),
(1, 423867, 60, 102, 126, 334.5),
(1, 157290, 60, 100, 120, 250.0),
(1, 895631, 60, 92, 118, 241.0),
(1, 240786, 60, 103, 132, 300.0),
(1, 713459, 60, 100, 132, 280.0),
(1, 586902, 60, 102, 129, 380.3),
(1, 941307, 60, 92, 115, 243.0),
(1, 378561, 45, 90, 112, 180.1),
(1, 625894, 60, 101, 124, 299.0),

(2, 357219, 60, 93, 113, 223.0),
(2, 684930, 60, 107, 136, 361.0),
(2, 129475, 60, 114, 140, 415.0),
(2, 831652, 60, 102, 127, 300.0),
(2, 496078, 60, 100, 120, 300.0),
(2, 205843, 60, 100, 120, 300.0),
(2, 763901, 45, 104, 129, 266.0),
(2, 942516, 45, 90, 112, 180.1),
(2, 318724, 60, 98, 126, 286.0),

(3, 570392, 60, 100, 122, 329.4),
(3, 689145, 60, 111, 138, 400.0),
(3, 423867, 60, 111, 131, 397.0),
(3, 157290, 60, 99, 119, 273.0),
(3, 895631, 60, 109, 153, 387.6),
(3, 240786, 45, 111, 136, 300.0),
(3, 713459, 45, 108, 129, 298.0),
(3, 586902, 60, 111, 139, 397.6),
(3, 941307, 60, 107, 136, 380.2),

(4, 378561, 80, 123, 146, 643.1),
(4, 625894, 60, 106, 130, 263.0),
(4, 357219, 60, 118, 151, 486.0),
(4, 684930, 30, 136, 175, 238.0),
(4, 129475, 60, 121, 146, 450.7),
(4, 831652, 60, 118, 121, 413.0),
(4, 496078, 45, 115, 144, 305.0),

(5, 205843, 20, 153, 172, 226.4),
(5, 763901, 45, 123, 152, 321.0),
(5, 942516, 210, 108, 160, 1376.0),
(5, 318724, 160, 110, 137, 1034.4),
(5, 570392, 160, 109, 135, 853.0),
(5, 689145, 45, 118, 141, 341.0),

(6, 423867, 20, 110, 130, 131.4),
(6, 157290, 180, 90, 130, 800.4),
(6, 895631, 150, 105, 135, 873.4),
(6, 240786, 150, 107, 130, 816.0),
(6, 713459, 20, 106, 136, 110.4),
(6, 586902, 300, 108, 143, 1500.2),
(6, 941307, 150, 97, 129, 1115.0),

(7, 378561, 60, 109, 153, 387.6),
(7, 625894, 90, 100, 127, 700.0),
(7, 357219, 150, 97, 127, 953.2),
(7, 684930, 45, 114, 146, 304.0),
(7, 129475, 90, 98, 125, 563.2),

(8, 831652, 45, 105, 134, 251.0),
(8, 496078, 45, 110, 141, 300.0),
(8, 205843, 120, 100, 130, 500.4),
(8, 763901, 270, 100, 131, 1729.0),
(8, 942516, 30, 159, 182, 319.2),

(9, 318724, 45, 149, 169, 344.0),
(9, 570392, 30, 103, 139, 151.1),
(9, 689145, 120, 100, 130, 500.0),
(9, 423867, 45, 100, 120, 225.3),
(9, 157290, 30, 151, 170, 300.0),

(10, 895631, 45, 102, 136, 234.0),
(10, 240786, 120, 100, 157, 1000.1),
(10, 713459, 45, 129, 103, 242.0),
(10, 586902, 20, 83, 107, 50.3),
(10, 941307, 180, 101, 127, 600.1),
(11, 378561, 45, 107, 137, 300.0),
(11, 625894, 30, 90, 107, 105.3),
(11, 357219, 15, 80, 100, 50.5),
(11, 684930, 20, 150, 171, 127.4),
(11, 129475, 20, 151, 168, 229.4),

(12, 831652, 30, 95, 128, 128.2),
(12, 496078, 25, 152, 168, 244.2),
(12, 205843, 30, 109, 131, 188.2),
(12, 763901, 90, 93, 124, 604.1),
(12, 942516, 20, 95, 112, 77.7),

(13, 318724, 90, 90, 110, 500.0),
(13, 570392, 90, 90, 100, 500.0),
(13, 689145, 90, 90, 100, 500.4),
(13, 423867, 30, 92, 108, 92.7),
(13, 157290, 30, 93, 128, 124.0),

(14, 895631, 180, 90, 120, 800.3),
(14, 240786, 30, 90, 120, 86.2),
(14, 713459, 90, 90, 120, 500.3),
(14, 586902, 210, 137, 184, 1860.4),
(14, 941307, 60, 102, 124, 325.2),

(15, 378561, 45, 107, 124, 275.0),
(15, 625894, 15, 124, 139, 124.2),
(15, 357219, 45, 100, 120, 225.3),
(15, 684930, 60, 108, 131, 367.6),
(15, 129475, 60, 108, 151, 351.7),

(16, 831652, 60, 116, 141, 443.0),
(16, 496078, 60, 97, 122, 277.4),
(16, 205843, 60, 105, 125, 300.0),
(16, 763901, 60, 103, 124, 332.7),
(16, 942516, 30, 112, 137, 193.9),

(17, 318724, 45, 100, 120, 100.7),
(17, 570392, 60, 119, 169, 336.7),
(17, 689145, 60, 107, 127, 344.9),
(17, 423867, 60, 111, 151, 368.5),
(17, 157290, 60, 98, 122, 271.0),

(18, 895631, 60, 97, 124, 275.3),
(18, 240786, 60, 109, 127, 382.0),
(18, 713459, 90, 99, 125, 466.4),
(18, 586902, 60, 114, 151, 384.0),
(18, 941307, 60, 104, 134, 342.5),

(19, 378561, 60, 107, 138, 357.5),
(19, 625894, 60, 103, 133, 335.0),
(19, 357219, 60, 106, 132, 327.5),
(19, 684930, 60, 103, 136, 339.0),
(19, 129475, 20, 136, 156, 189.0),

(20, 831652, 45, 117, 143, 317.7),
(20, 496078, 45, 115, 137, 318.0),
(20, 205843, 45, 113, 138, 308.0),
(20, 763901, 20, 141, 162, 222.4),
(20, 942516, 60, 108, 135, 390.0),

(21, 318724, 60, 97, 127, 300.0),
(21, 570392, 45, 100, 120, 250.4),
(21, 689145, 45, 122, 149, 335.4);

COMMIT;

